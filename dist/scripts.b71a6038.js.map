{"version":3,"sources":["scripts.js"],"names":["baseEndpoint","proxy","form","document","querySelector","recipesEl","ingCheckboxes","Array","from","querySelectorAll","console","log","fetchRecipes","query","ingredients","ingredientString","join","res","fetch","data","json","handleSubmit","event","preventDefault","el","currentTarget","value","fetchAndDispay","submit","disabled","forEach","checkbox","checked","push","name","recipes","displayRecipes","results","html","map","recipe","title","thumbnail","href","innerHTML","addEventListener"],"mappings":"AACA,MAAMA,YAAY,GAAG,gCAArB;AACA,MAAMC,KAAK,GAAG,sCAAd;AAEA,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAb;AACA,MAAMC,SAAS,GAAGF,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAlB;AACA,MAAME,aAAa,GAAGC,KAAK,CAACC,IAAN,CAAWN,IAAI,CAACO,gBAAL,CAAsB,kBAAtB,CAAX,CAAtB;AACAC,OAAO,CAACC,GAAR,CAAYL,aAAZ;;AAEA,eAAeM,YAAf,CAA4BC,KAA5B,EAAmCC,WAAnC,EAAgD;AAE5C,QAAMC,gBAAgB,GAAGD,WAAW,CAACE,IAAZ,CAAiB,GAAjB,CAAzB;AACA,QAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEjB,KAAM,GAAED,YAAa,MAAKa,KAAM,MAAKE,gBAAiB,EAA1D,CAAvB;AACAL,EAAAA,OAAO,CAACC,GAAR,CAAYM,GAAZ;AACA,QAAME,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AACAV,EAAAA,OAAO,CAACC,GAAR,CAAYQ,IAAZ;AACA,SAAOA,IAAP;AACH;;AAGD,MAAME,YAAY,GAAG,MAAMC,KAAN,IAAe;AAChCA,EAAAA,KAAK,CAACC,cAAN;AACA,QAAMC,EAAE,GAAGF,KAAK,CAACG,aAAjB;AACAf,EAAAA,OAAO,CAACC,GAAR,CAAYa,EAAE,CAACX,KAAH,CAASa,KAArB;AACAC,EAAAA,cAAc,CAACH,EAAE,CAACX,KAAH,CAASa,KAAV,CAAd;AAEH,CAND;;AAQA,eAAeC,cAAf,CAA8Bd,KAA9B,EAAqC;AAEjC;AACAX,EAAAA,IAAI,CAAC0B,MAAL,CAAYC,QAAZ,GAAuB,IAAvB,CAHiC,CAKjC;;AAEA,MAAIf,WAAW,GAAG,EAAlB;AAEAR,EAAAA,aAAa,CAACwB,OAAd,CAAsBC,QAAQ,IAAI;AAC9B,QAAGA,QAAQ,CAACC,OAAZ,EAAqB;AACjBlB,MAAAA,WAAW,CAACmB,IAAZ,CAAiBF,QAAQ,CAACG,IAA1B;AACH;AACJ,GAJD,EATiC,CAejC;;AACA,QAAMC,OAAO,GAAG,MAAMvB,YAAY,CAACC,KAAD,EAAQC,WAAR,CAAlC,CAhBiC,CAkBjC;;AACAZ,EAAAA,IAAI,CAAC0B,MAAL,CAAYC,QAAZ,GAAuB,KAAvB;AACAnB,EAAAA,OAAO,CAACC,GAAR,CAAYwB,OAAZ;AACAC,EAAAA,cAAc,CAACD,OAAO,CAACE,OAAT,CAAd;AACH;;AAED,SAASD,cAAT,CAAwBD,OAAxB,EAAiC;AAC7BzB,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,QAAM2B,IAAI,GAAGH,OAAO,CAACI,GAAR,CAAYC,MAAM,IAAI;AAC/B,WAAQ;0BACUA,MAAM,CAACC,KAAM;yBACdD,MAAM,CAAC1B,WAAY;sBACtB0B,MAAM,CAACE,SAAP,IAAqB,aAAYF,MAAM,CAACE,SAAU,UAASF,MAAM,CAACC,KAAM,KAAK;;+BAEpED,MAAM,CAACG,IAAK,UAASH,MAAM,CAACC,KAAM;uBALzD;AAOH,GARY,CAAb;AASApC,EAAAA,SAAS,CAACuC,SAAV,GAAsBN,IAAI,CAACtB,IAAL,CAAU,EAAV,CAAtB;AACH;;AAEDd,IAAI,CAAC2C,gBAAL,CAAsB,QAAtB,EAAgCxB,YAAhC;AACAM,cAAc,CAAC,OAAD,CAAd","file":"scripts.b71a6038.js","sourceRoot":"..","sourcesContent":["\r\nconst baseEndpoint = \"http://www.recipepuppy.com/api\";\r\nconst proxy = 'https://cors-anywhere.herokuapp.com/';\r\n\r\nconst form = document.querySelector('form.search');\r\nconst recipesEl = document.querySelector('.recipes');\r\nconst ingCheckboxes = Array.from(form.querySelectorAll('[type=\"checkbox\"'));\r\nconsole.log(ingCheckboxes);\r\n\r\nasync function fetchRecipes(query, ingredients) {\r\n\r\n    const ingredientString = ingredients.join(',');\r\n    const res = await fetch(`${proxy}${baseEndpoint}?q=${query}&i=${ingredientString}`);\r\n    console.log(res); \r\n    const data = await res.json();\r\n    console.log(data);\r\n    return data;\r\n}\r\n\r\n\r\nconst handleSubmit = async event => {\r\n    event.preventDefault();\r\n    const el = event.currentTarget;\r\n    console.log(el.query.value);\r\n    fetchAndDispay(el.query.value);\r\n    \r\n}\r\n\r\nasync function fetchAndDispay(query) {\r\n\r\n    // turn the form off \r\n    form.submit.disabled = true;\r\n\r\n    // handle checkboxes here \r\n\r\n    let ingredients = [];\r\n\r\n    ingCheckboxes.forEach(checkbox => {\r\n        if(checkbox.checked) {\r\n            ingredients.push(checkbox.name);\r\n        }\r\n    });\r\n\r\n    // submit the search\r\n    const recipes = await fetchRecipes(query, ingredients);\r\n\r\n    // turn the form on\r\n    form.submit.disabled = false;\r\n    console.log(recipes);\r\n    displayRecipes(recipes.results);\r\n}\r\n\r\nfunction displayRecipes(recipes) {\r\n    console.log('Create HTML');\r\n    const html = recipes.map(recipe => {\r\n        return `<div class=\"recipe\">\r\n                    <h2>${recipe.title}</h2>\r\n                    <p>${recipe.ingredients}</p>\r\n                    ${recipe.thumbnail && `<img src=\"${recipe.thumbnail}\" alt=\"${recipe.title}\"/>`}\r\n\r\n                    <a href=\"${recipe.href}\">View ${recipe.title}</a>\r\n                </div>`;\r\n    });\r\n    recipesEl.innerHTML = html.join('');\r\n}\r\n\r\nform.addEventListener('submit', handleSubmit);\r\nfetchAndDispay('pizza');\r\n"]}